{"version":3,"sources":["./src/app/modules/login/login.module.ts","./src/app/modules/login/login/login.component.ts","./src/app/modules/login/login/login.component.html","./src/app/shared/components/node/node.service.ts"],"names":[],"mappings":"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","file":"modules-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\n\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: LoginComponent },\r\n  { path: ':type', component: LoginComponent }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(routes)\r\n  ]\r\n})\r\nexport class LoginModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { NodeService } from '../../../shared/components/node/node.service';\r\nimport { DATA_USERS, IUSER } from './../../../data/user';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  hierarchy = [\r\n    { id: 1, label: '1', parent_id: null },\r\n    { id: 2, label: '2', parent_id: 1 },\r\n    { id: 3, label: '3', parent_id: 2 },\r\n    { id: 4, label: '4', parent_id: 2 },\r\n    { id: 5, label: '5', parent_id: 3 },\r\n    { id: 6, label: '6 Resources', parent_id: 3 },\r\n    { id: 7, label: '7', parent_id: 1 },\r\n  ];\r\n\r\n  nodes = {\r\n    label: 'test 2',\r\n    children: [\r\n      {\r\n        label: 'sample',\r\n        children: [\r\n          {\r\n            label: 'ABC'\r\n          },\r\n          {\r\n            label: 'AABC',\r\n            children: [\r\n              {\r\n                label: 'ABC'\r\n              },\r\n              {\r\n                label: 'AABC',\r\n                children: [\r\n                  {\r\n                    label: 'ABC'\r\n                  },\r\n                  {\r\n                    label: 'AABC'\r\n                  }\r\n                ]\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {label: 'sample2'}\r\n    ]\r\n  };\r\n\r\n  public form: FormGroup;\r\n  users = DATA_USERS;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private router: Router,\r\n    private nodeService: NodeService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n\r\n    if (localStorage.getItem('user')) {\r\n      this.router.navigate(['provisioning']);\r\n    }\r\n\r\n    this.nodes = this.nodeService.formatOrg(this.hierarchy);\r\n    // console.log();\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      username: ['', [Validators.required]],\r\n      password: ['', [Validators.required]],\r\n    });\r\n  }\r\n\r\n  login(): void{\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n\r\n    const result = this.authenticate();\r\n    if (!result.valid) {\r\n      alert('Invalid Username/Password');\r\n      return;\r\n    }\r\n    localStorage.setItem('user', JSON.stringify(result.user));\r\n    this.router.navigate(['provisioning']);\r\n  }\r\n\r\n  authenticate(): {\r\n    valid: boolean,\r\n    user: IUSER\r\n  } {\r\n    const formValues = this.form.value;\r\n    const validUser = this.users.filter( x => {\r\n      return x.password === formValues.password && x.username === formValues.username;\r\n    });\r\n\r\n    return  {\r\n      valid: validUser.length > 0,\r\n      user: validUser.length > 0 ? validUser[0] : null\r\n    };\r\n  }\r\n}\r\n","<div class=\"login\">\r\n    <h2>Login</h2>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"email\">Username:</label>\r\n        <input type=\"text\" class=\"form-control\" formControlName=\"username\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"pwd\">Password:</label>\r\n        <input type=\"password\" class=\"form-control\" formControlName=\"password\">\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary\" (click)=\"login()\">Login</button>\r\n    </form>\r\n</div>\r\n\r\n\r\n\r\n<!-- <ng-template #nodeTemplate let-node=\"node\">\r\n  <label>{{node.label}}</label>\r\n</ng-template>\r\n\r\n<div class=\"node-tree\">\r\n  <app-node [node]=\"nodes\" [nodeTemplate]=\"nodeTemplate\"></app-node>\r\n</div> -->\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NodeService {\r\n\r\n  constructor() { }\r\n\r\n  public formatOrg(hierarchy): any {\r\n    const rootNode = this.getRootNode(hierarchy);\r\n    return {\r\n      ...rootNode,\r\n      children: this.findChildren(rootNode, hierarchy)\r\n    };\r\n  }\r\n\r\n  private findChildren(root, hierarchy): any {\r\n    const children = hierarchy.filter(item => item.parent_id === root.id);\r\n\r\n    return children.map(item => {\r\n      return {\r\n        ...item,\r\n        children: this.findChildren(item, hierarchy)\r\n      };\r\n    });\r\n  }\r\n\r\n  private getRootNode(hierarchy): any {\r\n    return hierarchy.filter(item => !item.parent_id)[0];\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}