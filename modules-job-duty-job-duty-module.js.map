{"version":3,"sources":["./src/app/modules/job-duty/job-duty.module.ts","./src/app/modules/job-duty/job-duty/job-duty.component.ts","./src/app/modules/job-duty/job-duty/job-duty.component.html","./src/app/shared/service/local-data.service.ts"],"names":[],"mappings":"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","file":"modules-job-duty-job-duty-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { JobDutyComponent } from './job-duty/job-duty.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../../shared/shared.module';\n\n\nconst routes: Routes = [\n  { path: '', component: JobDutyComponent },\n];\n\n@NgModule({\n  declarations: [JobDutyComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ]\n})\nexport class JobDutyModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ApiService } from 'src/app/shared/service/api.service';\nimport { LocalDataService } from 'src/app/shared/service/local-data.service';\nimport { environment } from 'src/environments/environment';\n\n\nexport interface IJobDuty  {\n  id: string;\n  name: string;\n  // description?: string;\n}\n\n\n@Component({\n  selector: 'app-job-duty',\n  templateUrl: './job-duty.component.html',\n  styleUrls: ['./job-duty.component.scss']\n})\nexport class JobDutyComponent implements OnInit {\n\n  public entity = 'job-duty';\n  public modalTitle: string;\n  public form: FormGroup;\n  public showModal = false;\n  public jobDuties: IJobDuty[] = [];\n  public staticJobDuties: IJobDuty[] = [\n    {\n      id: '1',\n      name: 'Job A'\n    },\n    {\n      id: '2',\n      name: 'Job B'\n    }\n  ];\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private apiService: ApiService,\n    private router: Router,\n    private localDataService: LocalDataService\n  ) { }\n\n  ngOnInit(): void {\n    this.buildForm();\n\n    // TEMP\n    if (environment.staticData) {\n      this.jobDuties = this.staticJobDuties;\n      return;\n    }\n\n    this.apiService.listMap(this.entity, {limit: 100, offset: 0}).subscribe( x => {\n      this.jobDuties = x.data;\n    });\n  }\n\n  private buildForm(): void {\n    this.form = this.formBuilder.group({\n      id: '',\n      name: ['', [Validators.required]]\n    });\n  }\n\n  showAppForm(type: string, br?: IJobDuty): void {\n    if (type === 'add') {\n      this.modalTitle = 'New Business Job Duty';\n    } else {\n      this.modalTitle = `Edit ${br.name}`;\n      this.form.setValue(br);\n    }\n\n    this.showModal = true;\n  }\n\n  closeModal(): void {\n    this.form.reset();\n    this.showModal = false;\n  }\n\n\n  submitForm(): void{\n    this.form.markAllAsTouched();\n    if (this.form.invalid) {\n      return;\n    }\n    this.showModal = false;\n    const {id, name }: IJobDuty = this.form.value;\n\n    if (id) {\n      this.update({id, name });\n    } else {\n      this.create({ name });\n    }\n\n    this.form.reset();\n  }\n\n  deleteApp(app: IJobDuty): void {\n    const sure = confirm('Are you sure?');\n    if (sure) {\n\n      // TEMP\n      if (environment.staticData) {\n        this.jobDuties = this.jobDuties.filter( o => o.id !== app.id);\n        return;\n      }\n\n      this.apiService.delete(this.entity, app.id).subscribe( x => {\n        this.jobDuties = this.jobDuties.filter( o => o.id !== app.id);\n      });\n    }\n  }\n\n\n  private update({id, name}): void{\n\n    // TEMP\n    if (environment.staticData) {\n      this.jobDuties.map( x => {\n        if (id === x.id) {\n          x.name = name;\n        }\n      });\n      return;\n    }\n\n    this.apiService.update(this.entity, id, {\n      name\n    }).subscribe ( x => {\n      this.jobDuties.map( o => {\n        if (id === o.id) {\n          o.name = name;\n        }\n      });\n    });\n  }\n\n  private create({ name }): void{\n    // TEMP\n    if (environment.staticData) {\n      this.jobDuties.push({\n        id: new Date().getTime().toString(),\n        name\n      });\n      return;\n    }\n\n    this.apiService.create(this.entity, {\n      name\n    }).subscribe ( x => {\n        this.jobDuties.push({\n          id: x.id,\n          name\n        });\n    });\n  }\n\n  selectApp(app: IJobDuty): void {\n    // this.localDataService.save('application', app);\n    // this.router.navigate(['/businessroles/', app.id]);\n  }\n}\n","<nav aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item active\">Job Duties</li>\n    </ol>\n</nav>\n\n\n<div class=\"table-search\"> \n    <input type=\"search\" class=\"form-control form-control-sm\" placeholder=\"Search\">\n    <button type=\"button\" (click)=\"showAppForm('add')\" class=\"btn btn-primary btn-sm\">Add New Job Duty</button>\n  </div>\n  \n  <table class=\"table table-sm table-striped\">\n      <thead class=\"\">\n        <tr>\n          <th scope=\"col\">Name</th>\n          <!-- <th scope=\"col\">Description</th> -->\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let jd of jobDuties\">\n          <td>\n              <a class=\"btn btn-link btn-sm\" (click)=\"selectApp(jd)\">{{jd.name}}</a>\n          </td>\n          <!-- <td>{{br.description}}</td> -->\n          <td class=\"actions\">\n              <a class=\"btn-link btn-sm\" (click)=\"showAppForm('edit', jd)\">Edit</a>\n              <a class=\"btn-link btn-sm\" (click)=\"deleteApp(jd)\">Delete</a>\n          </td>\n        </tr> \n      </tbody>\n  </table>\n\n\n  <app-modal\n    [show]=\"showModal\"\n    [saveBtn]=\"'Save'\"\n    [closeBtn]=\"'Cancel'\"\n    [title]=\"modalTitle\"\n    (close)=\"closeModal()\"\n    (submit)=\"submitForm()\"\n>\n    <form [formGroup]=\"form\">\n        <input formControlName=\"id\" type=\"hidden\"> \n        <div class=\"form-group\">\n            <label>Name</label> \n            <input \n              formControlName=\"name\" type=\"text\" class=\"form-control is-invalid\" \n              [ngClass]=\"{'is-invalid': form.controls.name.invalid && form.controls.name.touched}\">\n        </div>\n        <!-- <div class=\"form-group\">\n            <label>Description</label>\n            <textarea formControlName=\"description\" type=\"text\" class=\"form-control\" ></textarea>\n        </div> -->\n    </form>\n</app-modal>\n  ","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocalDataService {\r\n\r\n  constructor(\r\n\r\n  ) { }\r\n\r\n  save(what: string, data: any): void {\r\n\r\n    let newData = {\r\n      [what]: data\r\n    };\r\n\r\n    if (!this.isEmpty(this.current)) {\r\n      newData = {\r\n        ...this.current,\r\n        ...{ [what]: data }\r\n      };\r\n    }\r\n    localStorage.setItem('localData', JSON.stringify(newData));\r\n  }\r\n\r\n  get data(): any{\r\n    return this.current;\r\n  }\r\n\r\n  get(what: string ): void {\r\n    if (this.isEmpty(this.current)) {\r\n      return;\r\n    }\r\n    return this.current[what];\r\n  }\r\n\r\n  delete(what: string): void{\r\n    if (this.isEmpty(this.current)) {\r\n      return;\r\n    }\r\n    const clone = this.cloneObject(this.current);\r\n    delete clone[what];\r\n    localStorage.setItem('localData', JSON.stringify(clone));\r\n  }\r\n\r\n  clear(): void{\r\n    localStorage.removeItem('localData');\r\n  }\r\n\r\n  private cloneObject(obj): any{\r\n    const str = JSON.stringify(obj);\r\n    return JSON.parse(str);\r\n  }\r\n\r\n  private get current(): any{\r\n    const data = localStorage.getItem('localData');\r\n    return data ? JSON.parse(data) : {};\r\n  }\r\n\r\n  private isEmpty(obj): boolean{\r\n    return Object.keys(obj).length === 0;\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}