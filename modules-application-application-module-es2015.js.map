{"version":3,"sources":["./src/app/modules/application/application-attribute-options/application-attribute-options.component.ts","./src/app/modules/application/application-attribute-options/application-attribute-options.component.html","./src/app/modules/application/application-view/application-view.component.ts","./src/app/modules/application/application-view/application-view.component.html","./src/app/modules/application/application.module.ts","./src/app/modules/application/application/application.component.ts","./src/app/modules/application/application/application.component.html","./src/app/modules/application/test/test.component.ts","./src/app/modules/application/test/test.component.html"],"names":[],"mappings":"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","file":"modules-application-application-module-es2015.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-application-attribute-options',\n  templateUrl: './application-attribute-options.component.html',\n  styleUrls: ['./application-attribute-options.component.scss']\n})\nexport class ApplicationAttributeOptionsComponent implements OnInit {\n\n  public form: FormGroup;\n  public attributeOptions = [];\n  public showDescription = true;\n  public editId;\n  @Input() id: string;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private localdata: LocalDataService,\n  ) { }\n\n  ngOnInit(): void {\n    this.buildForm();\n\n    if (environment.staticData){\n      const values = this.localdata.get('attributeOptions');\n      if (!values){\n        return;\n      }\n\n      const attrId = this.id.replace(/\\ /g, '_').toLowerCase();\n      this.attributeOptions = values[`attr-opts-${attrId}`] || [];\n      return;\n    }\n  }\n\n  private buildForm(): void{\n    this.form = this.formBuilder.group({\n      value: ['', Validators.required]\n    });\n  }\n\n  add(): void {\n    if (this.form.invalid) {\n      alert('All fields are required');\n      return;\n    }\n\n    const formValues = this.form.value;\n\n    const translations = formValues.translations.map( x => {\n      return {\n        keyVal: formValues.value,\n        langId: Number(x.language),\n        value: x.value\n      };\n    });\n    formValues.translations = translations;\n    const data = {\n      id: new Date().getTime(),\n      value: formValues.value,\n      translations,\n      default: false\n    };\n    if (!this.editId) {\n      this.attributeOptions.push(data);\n    } else {\n      this.attributeOptions = this.attributeOptions.map( x => {\n        if (x.id === this.editId) {\n          return data;\n        }\n        return x;\n      });\n    }\n\n\n    this.form.reset();\n    this.showDescription = false;\n    this.saveLocalData();\n    setTimeout( x => {\n      this.showDescription = true;\n    }, 100);\n  }\n\n  setDefault(id, value): void{\n    this.attributeOptions.map( x => {\n      if (id === x.id) {\n        x.default = !value;\n      } else {\n        x.default = false;\n      }\n      return x;\n    });\n    this.saveLocalData();\n  }\n\n  edit(option): void{\n    this.editId = option.id;\n    this.form.get('value').patchValue(option.value);\n    this.showDescription = false;\n    setTimeout( x => {\n      this.showDescription = true;\n      this.appendCurrentTranslations(option.translations);\n    });\n  }\n\n  cancelEdit(): void{\n    this.editId = null;\n    this.form.reset();\n    this.showDescription = false;\n    setTimeout( x => {\n      this.showDescription = true;\n    });\n  }\n\n  private appendCurrentTranslations(translations: any[]): void{\n    this.form.removeControl('translations');\n    this.form.addControl('translations', this.formBuilder.array([], Validators.required));\n\n    translations.forEach( x => {\n      const group = this.formBuilder.group({\n        language: [x.langId.toString(), Validators.required],\n        value: [x.value, Validators.required]\n      });\n      (this.form.get('translations') as FormArray).push(group);\n    });\n  }\n\n  delete(id): void{\n    const sure = confirm('Are you sure?');\n    if (!sure) {\n      return;\n    }\n\n    this.attributeOptions = this.attributeOptions.filter( x => x.id !== id);\n    this.saveLocalData();\n  }\n\n  private saveLocalData(): void {\n    const attrId = this.id.replace(/\\ /g, '_').toLowerCase();\n    const toSave = {\n      ['attr-opts-' + attrId]: this.attributeOptions\n    };\n    const oldvalues = this.localdata.get('attributeOptions');\n    if (!oldvalues){\n      this.localdata.save('attributeOptions', {\n        ...toSave\n      });\n    } else {\n      this.localdata.save('attributeOptions', {\n        ...oldvalues,\n        ...toSave\n      });\n    }\n  }\n}\n","<ul class=\"nav nav-tabs\" >\n    <li class=\"nav-item\">\n        <a class=\"nav-link active\">Options</a>\n      </li>\n</ul>\n<form class=\"fform fform--inline optionsForm\" [formGroup]=\"form\">\n    <div class=\"form-group flex-2\" >\n      <label>Description:</label> \n      <app-language-field *ngIf=\"showDescription\" [title]=\"'Description'\" [form]=\"form\"></app-language-field> \n    </div>\n    <div class=\"form-group\">\n        <label>Value: </label>\n        <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"value\">\n    </div>\n    <button type=\"button\" class=\"btn btn-sm  btn-primary\" (click)=\"add()\">{{editId ? 'Update' : 'Add'}}</button>\n    <button *ngIf=\"editId\" type=\"button\" class=\"btn btn-sm  btn-secondary\" (click)=\"cancelEdit()\">Cancel</button>\n</form>\n\n<div class=\"table-list optionsList\" >  \n    <table class=\"table table-sm\">\n        <thead>\n            <tr> \n                <th scope=\"col\">Description</th>\n                <th scope=\"col\">Value</th>\n                <th scope=\"col\">Default</th>\n                <th scope=\"col\"></th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let option of attributeOptions\"> \n                <td>\n                    {{option.translations | itranslate}}\n                </td>\n                <td>\n                    {{option.value}}\n                </td>\n                <td>\n                    <div class=\"form-check\">\n                        <input \n                            (change)=\"setDefault(option.id, option.default)\"\n                            type=\"checkbox\" class=\"form-check-input\" [checked]=\"option.default\"> \n                    </div>\n                </td>\n                <td class=\"table-list__actions\">\n                    <a (click)=\"edit(option)\">edit</a> | <a (click)=\"delete(option.id)\">delete</a>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>     ","import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { JkWaitService } from 'jk-wait';\r\nimport { ApiService } from 'src/app/shared/services/api.service';\r\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IApplication } from '../../../shared/interfaces/iapplication';\r\n\r\nexport interface IApplicationAttribute  {\r\n  id: string;\r\n  type: string;\r\n  translations: any[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-application-view',\r\n  templateUrl: './application-view.component.html',\r\n  styleUrls: ['./application-view.component.scss']\r\n})\r\nexport class ApplicationViewComponent implements OnInit {\r\n\r\n  public application: IApplication;\r\n  public applicationAttributes: any[] = [];\r\n  public modalTitle: string;\r\n  public saveButtonText: string;\r\n  public editAttribute: any;\r\n  public form: FormGroup;\r\n  public applicationForm: FormGroup;\r\n  public showModal = false;\r\n  public isExistingAttribute = false;\r\n  public allAttributes = [];\r\n  public dragging: any;\r\n  public dropping: any;\r\n  public applications: IApplication[] = [];\r\n\r\n  // TEMP\r\n  activeTab = 'details';\r\n\r\nconstructor(\r\n    private formBuilder: FormBuilder,\r\n    private localdata: LocalDataService,\r\n    private api: ApiService,\r\n    private router: Router,\r\n    private wait: JkWaitService\r\n  ) {\r\n    // TODO : remove if after api integration\r\n    this.applications = JSON.parse(localStorage.getItem('localData')).applications;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.application = this.localdata.get('application');\r\n    this.buildForm();\r\n    setTimeout( x => {\r\n      this.appendCurrentTranslations(this.applicationForm, this.application.translations);\r\n    }, 0);\r\n\r\n    if (environment.staticData){\r\n      const values = this.localdata.get('applicationAttributes');\r\n      this.getAllAttributes();\r\n      if (!values){\r\n        return;\r\n      }\r\n\r\n      const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n      this.applicationAttributes = values[`app-attr-${appId}`] || [];\r\n      return;\r\n    }\r\n\r\n    this.applicationAttributes = [];\r\n    this.getApplicationAttribute(this.application.systemId);\r\n  }\r\n\r\n  getAllAttributes(): any{\r\n    const values = this.localdata.get('applicationAttributes');\r\n    if (!values){\r\n      return;\r\n    }\r\n    Object.values(values).forEach((attrs: any) => {\r\n      this.allAttributes = [\r\n        ...this.allAttributes,\r\n        ...attrs\r\n      ];\r\n    });\r\n    return values;\r\n  }\r\n\r\n  hasAttribute(id): boolean{\r\n    return this.applicationAttributes.filter( x => x.attbId === id).length > 0;\r\n  }\r\n\r\n  toggleExistingAttribute(): void{\r\n    this.isExistingAttribute = !this.isExistingAttribute;\r\n    this.form.reset();\r\n  }\r\n\r\n  private saveLocalData(): void {\r\n    const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n    const sortedValues = this.applicationAttributes.sort(this.sortCompare);\r\n    const toSave = {\r\n      ['app-attr-' + appId]: sortedValues\r\n    };\r\n    const oldvalues = this.localdata.get('applicationAttributes');\r\n    if (!oldvalues){\r\n      this.localdata.save('applicationAttributes', {\r\n        ...toSave\r\n      });\r\n    } else {\r\n      this.localdata.save('applicationAttributes', {\r\n        ...oldvalues,\r\n        ...toSave\r\n      });\r\n    }\r\n  }\r\n\r\n  getApplicationAttribute(id: string): void{\r\n    this.api.list('applicationroleattribute/getApplicationRoleAttribute', {\r\n      systemId: id\r\n    }).subscribe( x => {\r\n      this.applicationAttributes = x.roleAttr;\r\n    });\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      id: ['', [Validators.required]],\r\n      type: ['', [Validators.required]],\r\n      existing: ['', []],\r\n    });\r\n    this.applicationForm = this.formBuilder.group({\r\n      systemId: [this.application.systemId, [Validators.required]],\r\n      allowMultiple: [this.application.allowMultiple]\r\n    });\r\n  }\r\n\r\n\r\n  showAppForm(type: string, app?: any): void {\r\n    if (type === 'add') {\r\n      this.modalTitle = 'New Attibute';\r\n      this.saveButtonText = 'Save';\r\n      this.editAttribute = null;\r\n    } else {\r\n      this.editAttribute = app;\r\n      this.saveButtonText = 'Update';\r\n      this.modalTitle = `Edit ${app.attbId}`;\r\n      this.form.get('id').patchValue(app.attbId);\r\n      this.form.get('type').patchValue(app.attbType);\r\n      setTimeout( x => {\r\n        this.appendCurrentTranslations(this.form, app.translations);\r\n      }, 0);\r\n    }\r\n\r\n    this.showModal = true;\r\n  }\r\n\r\n  private appendCurrentTranslations(form, translations: any[]): void{\r\n    translations.forEach( x => {\r\n      const group = this.formBuilder.group({\r\n        language: [x.langId.toString(), Validators.required],\r\n        value: [x.value, Validators.required]\r\n      });\r\n      (form.get('translations') as FormArray).push(group);\r\n    });\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.form.reset();\r\n    this.showModal = false;\r\n    this.isExistingAttribute = false;\r\n  }\r\n\r\n\r\n  submitForm(): void{\r\n    this.form.markAllAsTouched();\r\n\r\n    if (this.isExistingAttribute) {\r\n      const attrId = this.form.value.existing;\r\n      if (attrId.length === 0){\r\n        return;\r\n      }\r\n      const attribute = this.allAttributes.filter( x => x.attbId === attrId)[0];\r\n      this.applicationAttributes.push(attribute);\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      this.showModal = false;\r\n      this.isExistingAttribute = false;\r\n      return;\r\n    }\r\n\r\n    if (this.form.invalid) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    const {id, type, translations}: IApplicationAttribute = this.form.value;\r\n\r\n    const data = {\r\n      attbId: id,\r\n      attbType: type,\r\n      attbTitle: id,\r\n      systemId: this.application.systemId,\r\n      translations: translations.map( x => {\r\n        return {\r\n          keyVal: id,\r\n          langId: Number(x.language),\r\n          value: x.value\r\n        };\r\n      })\r\n    };\r\n\r\n    if (!this.editAttribute) {\r\n      if (environment.staticData) {\r\n        const order =  this.generateNextOrder();\r\n        const atributeData = {\r\n          ...data,\r\n          order\r\n        };\r\n        this.applicationAttributes.push(atributeData);\r\n        this.saveLocalData();\r\n        this.editAttribute = atributeData;\r\n        this.modalTitle = 'Edit ' + id;\r\n        this.saveButtonText = 'Update';\r\n        // this.form.reset();\r\n        return;\r\n      }\r\n\r\n      this.api.create('roleattribute/createRoleAttribute', data).subscribe( x => {\r\n        this.showModal = false;\r\n        this.form.reset();\r\n      });\r\n    } else {\r\n      this.updateAttribute(data, this.editAttribute);\r\n    }\r\n  }\r\n\r\n  updateAttribute(data, editAttribute): void {\r\n\r\n    if (environment.staticData) {\r\n\r\n      // update options id if id changed\r\n      if (editAttribute.attbId !== data.attbId) {\r\n          let allOptions = this.localdata.get('attributeOptions');\r\n          if (Object.keys(allOptions).length > 0) {\r\n            const attrId = editAttribute.attbId.replace(/\\ /g, '_').toLowerCase();\r\n            const atributeOptions = allOptions['attr-opts-' + attrId];\r\n            delete allOptions['attr-opts-' + attrId];\r\n            const newAttrId = data.attbId.replace(/\\ /g, '_').toLowerCase();\r\n            allOptions = {\r\n              ...allOptions,\r\n              ['attr-opts-' + newAttrId] : atributeOptions\r\n            };\r\n            this.localdata.save('attributeOptions', allOptions);\r\n          }\r\n      }\r\n\r\n\r\n      this.applicationAttributes = this.applicationAttributes.filter( x => x.attbId !== editAttribute.attbId);\r\n      this.applicationAttributes.push({\r\n        ...data,\r\n        order: editAttribute.order\r\n      });\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      this.showModal = false;\r\n      return;\r\n    }\r\n\r\n    this.api.create('roleattribute/updateRoleAttribute', {\r\n      ...data,\r\n      oldAttbId: editAttribute.attbId,\r\n    }).subscribe( x => {\r\n      this.showModal = false;\r\n      this.form.reset();\r\n    });\r\n  }\r\n\r\n  sortCompare( a, b ): number{\r\n    if ( a.order < b.order ){\r\n      return -1;\r\n    }\r\n    if ( a.order > b.order ){\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  async delete(app: any): Promise<any> {\r\n    const sure = confirm('Are you sure?');\r\n    if (!sure){\r\n      return;\r\n    }\r\n\r\n    if (environment.staticData) {\r\n      this.applicationAttributes = this.applicationAttributes.filter( x => x.attbId !== app.attbId);\r\n      this.saveLocalData();\r\n      return;\r\n    }\r\n    const data = {\r\n      roleAttributeId: app.attbId,\r\n      systemId: this.application.systemId\r\n    };\r\n    await this.api.create('applicationroleattribute/deleteApplicationRoleAttribute', data).toPromise();\r\n    this.applicationAttributes = this.applicationAttributes.filter( x => app.attbId !== x.attbId);\r\n  }\r\n\r\n\r\n  update(): void {\r\n    const formValue = this.applicationForm.value;\r\n    const translations = formValue.translations.map( x => {\r\n      return {\r\n        keyVal: formValue.systemId,\r\n        langId: Number(x.language),\r\n        value: x.value\r\n      };\r\n    });\r\n    // const updateData = {\r\n    //   oldSystemId: this.application.systemId,\r\n    //   systemDescription: formValue.systemId,\r\n    //   systemId: formValue.systemId,\r\n    //   translations,\r\n    // };\r\n\r\n    // update application attributes id if id changed\r\n    if (this.application.systemId !== formValue.systemId) {\r\n      let allAttributes = this.localdata.get('applicationAttributes');\r\n      if (Object.keys(allAttributes).length > 0) {\r\n        const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n        const appAtribute = allAttributes['app-attr-' + appId];\r\n        delete allAttributes['app-attr-' + appId];\r\n        const newAppId = formValue.systemId.replace(/\\ /g, '_').toLowerCase();\r\n        allAttributes = {\r\n          ...allAttributes,\r\n          ['app-attr-' + newAppId] : appAtribute\r\n        };\r\n        this.localdata.save('applicationAttributes', allAttributes);\r\n      }\r\n    }\r\n\r\n    this.localdata.save('application' , {\r\n      systemId: formValue.systemId,\r\n      systemDescription: formValue.systemId,\r\n      allowMultiple: formValue.allowMultiple,\r\n      translations,\r\n    });\r\n\r\n    const apps = this.localdata.get('applications').map( x => {\r\n      if (x.systemId === this.application.systemId) {\r\n        x.systemId = formValue.systemId;\r\n        x.systemDescription = formValue.systemId;\r\n        x.allowMultiple = formValue.allowMultiple;\r\n        x.translations = translations;\r\n      }\r\n      return x;\r\n    });\r\n    this.localdata.save('applications' , apps);\r\n\r\n    this.wait.start();\r\n    setTimeout( x => {\r\n      alert('Success');\r\n      this.wait.end();\r\n    }, 500);\r\n\r\n  }\r\n\r\n  cancel(): void{\r\n    this.router.navigate(['application']);\r\n  }\r\n\r\n  drag(attribute, event): void {\r\n    this.dragging = attribute;\r\n    event.dataTransfer.setData('attr', JSON.stringify(attribute));\r\n  }\r\n\r\n  dragend(): void{\r\n    this.dragging = null;\r\n    this.dropping = null;\r\n  }\r\n\r\n  allowDrop(ev, attribute): void{\r\n    ev.preventDefault();\r\n    this.dropping = attribute;\r\n  }\r\n\r\n  drop(ev, attribute): void{\r\n    ev.preventDefault();\r\n    const data = JSON.parse(ev.dataTransfer.getData('attr'));\r\n    const newOrder = attribute.order;\r\n\r\n    if (newOrder === data.order) {\r\n      return;\r\n    }\r\n\r\n    this.applicationAttributes = this.applicationAttributes.map( x => {\r\n      console.log(x.order + ' = ' + data.order + ' - ' + newOrder);\r\n\r\n      if (data.order > newOrder) {\r\n        if (x.order === data.order){\r\n          x.order = newOrder;\r\n        } else if (x.order >= newOrder && x.order <= data.order) {\r\n          x.order = x.order + 1;\r\n        }\r\n      } else {\r\n        if (x.order === data.order){\r\n          x.order = newOrder;\r\n        } else if ( x.order <= newOrder && x.order >= data.order) {\r\n          x.order = x.order - 1;\r\n        }\r\n      }\r\n\r\n      return x;\r\n    });\r\n    this.saveLocalData();\r\n  }\r\n\r\n  generateNextOrder(): number {\r\n    const keys = Object.keys(this.applicationAttributes);\r\n    if (keys.length === 0) {\r\n      return 0;\r\n    }\r\n    const lastkey = keys[keys.length - 1];\r\n    return (this.applicationAttributes[lastkey].order) + 1;\r\n  }\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\">\r\n            <a [routerLink]=\"['/application']\">Application Maintenance</a>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n            {{application.systemId}}\r\n        </li>\r\n    </ol>\r\n</nav>\r\n\r\n\r\n<form [formGroup]=\"applicationForm\" class=\"section \">\r\n    <!-- <label class=\"mb-3\">\r\n        <input formControlName=\"allowMultiple\" type=\"checkbox\" />\r\n        Allow multiple\r\n    </label> -->\r\n    <div class=\"application fform fform--inline\">\r\n        <div class=\"form-group form-group-sm\">\r\n            <label>\r\n                System ID:\r\n                <!-- <strong>{{application.systemId}}</strong> -->\r\n            </label>\r\n            <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"systemId\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>\r\n                Description:\r\n                <app-language-field [title]=\"'Description'\" [form]=\"applicationForm\"></app-language-field>\r\n                <!-- <strong>{{application.translations | itranslate}}</strong> -->\r\n            </label>\r\n            <!-- <textarea class=\"form-control form-control-sm\" rows=\"3\" readonly></textarea> -->\r\n        </div>\r\n        <div class=\"form-group form-group-sm allowMultiple\">\r\n            <label>\r\n                Allow Multiple:\r\n                <input formControlName=\"allowMultiple\" type=\"checkbox\" />\r\n            </label>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <button class=\"btn btn-sm btn-primary\" (click)=\"update()\">Update</button>\r\n            <button class=\"btn btn-sm btn-secondary\" (click)=\"cancel()\">Cancel</button>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<div class=\"table-list\">\r\n\r\n    <div class=\"table-list__buttons\">\r\n        <label>Attributes</label>\r\n        <button type=\"button\" class=\"btn btn-sm btn-success\" (click)=\"showAppForm('add')\">Add New Attribute</button>\r\n    </div>\r\n\r\n   \r\n    <table class=\"table table-sm draggable\">\r\n        <thead>\r\n            <tr> \r\n                <th scope=\"col\">ID</th>\r\n                <th scope=\"col\">Title</th>\r\n                <th scope=\"col\">Type</th>                \r\n                <th scope=\"col\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <!-- 'top' : this.dragging && this.dragging.order > attribute.order,\r\n            'bottom' : this.dragging && this.dragging.order < attribute.order -->\r\n\r\n            <tr \r\n                [ngClass]=\"{\r\n                    'dragging': this.dragging && this.dragging.attbId === attribute.attbId && this.dragging !== this.dropping,\r\n                    'dropping': this.dropping && this.dropping.attbId === attribute.attbId && this.dragging !== this.dropping\r\n                }\"\r\n                (drop)=\"drop($event, attribute)\" \r\n                (dragover)=\"allowDrop($event, attribute)\"\r\n                \r\n                *ngFor=\"let attribute of applicationAttributes\"> \r\n                <td>\r\n                    \r\n                    <label class=\"dragLabel\" draggable=\"true\" (dragstart)=\"drag(attribute, $event)\" (dragend)=\"dragend()\">\r\n                        <img src=\"./assets/images/drag-icon.svg\"/>\r\n                        {{attribute.attbId}}\r\n                    </label>\r\n                </td>\r\n                <td>\r\n                    {{ attribute.translations | itranslate }}\r\n                </td>\r\n                <td>\r\n                    {{attribute.attbType}}\r\n                </td>\r\n                <td class=\"table-list__actions\">\r\n                    <!-- <a>view</a> | -->\r\n                    <a (click)=\"showAppForm('edit', attribute)\">edit</a> |\r\n                    <a (click)=\"delete(attribute)\">delete</a>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n\r\n\r\n<app-modal class=\"large\" [show]=\"showModal\" [saveBtn]=\"saveButtonText\" [closeBtn]=\"'Cancel'\" [title]=\"modalTitle\"\r\n    (close)=\"closeModal()\" (submit)=\"submitForm()\">\r\n    <!-- <ul class=\"nav nav-tabs\" *ngIf=\"activeTab !== 'options'\">\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link active\">Details</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link\" (click)=\"activeTab='options'\">Options</a>\r\n        </li>\r\n    </ul> -->\r\n    <form [formGroup]=\"form\" class=\"fform fform--inline\">\r\n        <div *ngIf=\"!editAttribute\" class=\"form-check form-check-inline existingAttribute\">\r\n            <input (change)=\"toggleExistingAttribute()\" class=\"form-check-input\" type=\"checkbox\" id=\"inlineCheckbox1\"\r\n                [checked]=\"isExistingAttribute\">\r\n            <label class=\"form-check-label\" for=\"inlineCheckbox1\">Copy Attribute</label>\r\n        </div>\r\n        <ng-container *ngIf=\"isExistingAttribute\">\r\n            <div class=\"form-group\">\r\n                <label>Application: </label>\r\n                <select #selectedApp class=\"form-control form-control-sm\">\r\n                    <option></option>\r\n                    <ng-container *ngFor=\"let app of applications\">\r\n                        <option [value]=\"app.systemId\" *ngIf=\"app.systemId !== application.systemId\">{{app.systemId}}</option>\r\n                    </ng-container>\r\n                </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Attribute:</label>\r\n                <select [ngClass]=\"{'is-invalid': form.controls.existing.invalid && form.controls.existing.touched}\"\r\n                    formControlName=\"existing\" class=\"form-control form-control-sm\">\r\n                    <option></option>\r\n                    <ng-container *ngFor=\"let attr of allAttributes\">\r\n                        <option *ngIf=\"!hasAttribute(attr.attbId) && attr.systemId === selectedApp.value\" [value]=\"attr.attbId\">{{attr.attbId}}\r\n                        </option>\r\n                    </ng-container>\r\n\r\n                </select>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!isExistingAttribute\">\r\n            <div class=\"form-group\">\r\n                <label>ID: </label>\r\n                <input formControlName=\"id\" type=\"text\" class=\"form-control form-control-sm\"\r\n                    [ngClass]=\"{'is-invalid': form.controls.id.invalid && form.controls.id.touched}\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Type: </label>\r\n                <select [ngClass]=\"{'is-invalid': form.controls.type.invalid && form.controls.type.touched}\"\r\n                    formControlName=\"type\" class=\"form-control form-control-sm\">\r\n                    <option></option>\r\n                    <option value=\"string\">String</option>\r\n                    <option value=\"numeric\">Numeric</option>\r\n                    <option value=\"boolean\">Boolean</option>\r\n                </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Title: </label>\r\n                <app-language-field [title]=\"'Title'\" *ngIf=\"showModal\" [form]=\"form\"></app-language-field>\r\n            </div>\r\n        </ng-container>\r\n\r\n    </form>\r\n    <br>\r\n\r\n    <app-application-attribute-options [id]=\"editAttribute.attbId\" *ngIf=\"editAttribute && showModal\"></app-application-attribute-options>\r\n\r\n\r\n</app-modal>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ApplicationComponent } from './application/application.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from '../../shared/shared.module';\nimport { ApplicationViewComponent } from './application-view/application-view.component';\nimport { TestComponent } from './test/test.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ApplicationAttributeOptionsComponent } from './application-attribute-options/application-attribute-options.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ApplicationComponent\n  },\n  {\n    path: ':id',\n    component: ApplicationViewComponent\n  }\n];\n\n@NgModule({\n  declarations: [\n    ApplicationComponent,\n    ApplicationViewComponent,\n    TestComponent,\n    ApplicationAttributeOptionsComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ]\n})\nexport class ApplicationModule { }\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { ApiService } from 'src/app/shared/services/api.service';\r\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IApplication } from '../../../shared/interfaces/iapplication';\r\n\r\n@Component({\r\n  selector: 'app-application',\r\n  templateUrl: './application.component.html',\r\n  styleUrls: ['./application.component.scss']\r\n})\r\nexport class ApplicationComponent implements OnInit {\r\n\r\n  public language = environment.language;\r\n  public modalTitle: string;\r\n  public saveButtonText = 'Save';\r\n  public form: FormGroup;\r\n  public descriptionForm: FormGroup;\r\n  public showModal = false;\r\n  public editId: string;\r\n\r\n  applications = [\r\n    {\r\n      systemId: 'SVC',\r\n      systemDescription: 'SVC',\r\n      allowMultiple: false,\r\n      translations: [\r\n        {\r\n          id: 1,\r\n          keyVal: 'SVC',\r\n          langId: 1,\r\n          value: 'Single View Customer'\r\n        },\r\n        {\r\n          id: 2,\r\n          keyVal: 'SVC',\r\n          langId: 2,\r\n          value: '单视图客户'\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private api: ApiService,\r\n    private localdata: LocalDataService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n\r\n    if (environment.staticData){\r\n\r\n      if (!this.localdata.get('applications')){\r\n        this.localdata.save('applications', this.applications);\r\n      } else {\r\n        this.applications = this.localdata.get('applications');\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    this.loadData();\r\n  }\r\n\r\n  private async loadData(): Promise<any>{\r\n    this.applications = [];\r\n    const list =  await this.api.list('application/getAllApplication').toPromise();\r\n    this.applications = list.lstApplications;\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      systemId: ['', [Validators.required]],\r\n      allowMultiple: false\r\n    });\r\n  }\r\n\r\n  showAppForm(type: string, app?: IApplication): void {\r\n    if (type === 'add') {\r\n      this.modalTitle = 'New Application';\r\n      this.saveButtonText = 'Save';\r\n      this.editId = null;\r\n    } else {\r\n      this.saveButtonText = 'Update';\r\n      this.modalTitle = `Edit ${app.systemId}`;\r\n      this.editId = app.systemId;\r\n      this.form.get('systemId').patchValue(app.systemId);\r\n      setTimeout( x => {\r\n        this.appendCurrentTranslations(app.translations);\r\n      }, 0);\r\n    }\r\n\r\n    this.showModal = true;\r\n  }\r\n\r\n  private appendCurrentTranslations(translations: any[]): void{\r\n    translations.forEach( x => {\r\n      const group = this.formBuilder.group({\r\n        language: [x.langId.toString(), Validators.required],\r\n        value: [x.value, Validators.required]\r\n      });\r\n      (this.form.get('translations') as FormArray).push(group);\r\n    });\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.form.reset();\r\n    this.showModal = false;\r\n  }\r\n\r\n\r\n  async submitForm(): Promise<any> {\r\n    this.form.markAllAsTouched();\r\n    const { systemId, translations, allowMultiple }: IApplication = this.form.value;\r\n    if (this.form.invalid) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    if (!this.englishExist(translations)) {\r\n      alert('English translation is required');\r\n      return;\r\n    }\r\n\r\n    this.showModal = false;\r\n    const descriptions = translations.map( x => {\r\n      return {\r\n        keyVal: systemId,\r\n        langId: Number(x.language),\r\n        value: x.value\r\n      };\r\n    });\r\n\r\n    const data = {\r\n      systemDescription: systemId,\r\n      systemId,\r\n      translations: descriptions,\r\n      allowMultiple\r\n    };\r\n\r\n    if (this.modalTitle.includes('Edit')) {\r\n      // await this.updateApplication(data);\r\n      return;\r\n    }\r\n    await this.createApplication(data);\r\n  }\r\n\r\n\r\n  // async updateApplication(data): Promise<any>{\r\n  //   const updateData = {\r\n  //     oldSystemId: this.editId,\r\n  //     ...data\r\n  //   };\r\n\r\n  //   if (environment.staticData){\r\n  //     this.updateApplicationList(data.systemId, updateData.translations);\r\n  //     this.saveLocalData();\r\n  //     return;\r\n  //   }\r\n\r\n  //   const updated = await this.api.create('application/updateApplication', updateData).toPromise();\r\n  //   this.updateApplicationList(data.systemId, updated.application.translations);\r\n  //   this.form.reset();\r\n  // }\r\n\r\n  private updateApplicationList(systemId, translations): void{\r\n    this.applications = this.applications.map( x => {\r\n      if ( x.systemId === this.editId ) {\r\n        x.systemId = systemId;\r\n        x.translations = translations;\r\n      }\r\n      return x;\r\n    });\r\n  }\r\n\r\n  async createApplication(data): Promise<any>{\r\n    if (environment.staticData){\r\n      this.applications.push({\r\n        systemId: data.systemId,\r\n        systemDescription: data.systemId,\r\n        allowMultiple: data.allowMultiple,\r\n        translations: data.translations.map( x => {\r\n          return {\r\n            id: new Date().getTime(),\r\n            ...x\r\n          };\r\n        })\r\n      });\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      return;\r\n    }\r\n    const saved = await this.api.create('application/createApplication', data).toPromise();\r\n    this.form.reset();\r\n    this.applications.push(saved.application);\r\n  }\r\n\r\n  englishExist(translations): boolean {\r\n    const found = translations.filter( x => x.language === '1').length > 0;\r\n    return found;\r\n  }\r\n\r\n  async delete(app: IApplication): Promise<any> {\r\n    const sure = confirm('Are you sure?');\r\n    if (!sure){\r\n      return;\r\n    }\r\n\r\n    if (environment.staticData){\r\n      this.applications = this.applications.filter( x => {\r\n        return x.systemId !== app.systemId;\r\n      });\r\n      this.saveLocalData();\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      oldSystemId: app.systemId,\r\n      ...app\r\n    };\r\n    await this.api.create('application/deleteApplication', data).toPromise();\r\n    this.applications = this.applications.filter( x => x.systemId !== app.systemId);\r\n  }\r\n\r\n  view(app: IApplication): void{\r\n    this.localdata.save('application', app);\r\n    setTimeout( x => {\r\n      this.router.navigate(['application', app.systemId]);\r\n    }, 250);\r\n  }\r\n\r\n  private saveLocalData(): void{\r\n    this.localdata.save('applications', this.applications);\r\n  }\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Application Maintenance</li>\r\n    </ol>\r\n</nav>\r\n\r\n<div class=\"table-list\">\r\n    <div class=\"table-list__buttons\">\r\n        <label></label>\r\n        <button type=\"button\" class=\"btn btn-sm btn-primary\" (click)=\"showAppForm('add')\">Add New Application</button>\r\n    </div>\r\n\r\n    <table class=\"table table-sm\">\r\n        <thead>\r\n            <tr> \r\n                <th scope=\"col\">System ID</th>\r\n                <th scope=\"col\">Description</th>\r\n                <th scope=\"col\">Allow Multiple</th>\r\n                <th scope=\"col\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let app of applications\"> \r\n                <td>{{app.systemId}} </td>\r\n                <td>{{app.translations | itranslate}}</td>\r\n                <td>{{app.allowMultiple ? 'Yes' : 'No'}}</td>\r\n                <td class=\"table-list__actions\">\r\n                    <!-- <a (click)=\"view(app)\">view</a> | \r\n                    <a (click)=\"showAppForm('edit', app)\">edit</a> |  -->\r\n                    <a (click)=\"view(app)\">edit</a>\r\n                    <a (click)=\"delete(app)\">delete</a>\r\n                </td>\r\n            </tr> \r\n        </tbody>\r\n    </table>\r\n</div>\r\n\r\n\r\n<app-modal\r\n    [show]=\"showModal\"\r\n    [saveBtn]=\"saveButtonText\"\r\n    [closeBtn]=\"'Cancel'\"\r\n    [title]=\"modalTitle\"\r\n    (close)=\"closeModal()\"\r\n    (submit)=\"submitForm()\"\r\n>\r\n    <form [formGroup]=\"form\" *ngIf=\"form\">\r\n        <div class=\"form-group\">\r\n            <label>\r\n                <input formControlName=\"allowMultiple\" type=\"checkbox\" />\r\n                Allow multiple\r\n            </label>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>System ID</label> \r\n            <input \r\n              formControlName=\"systemId\" type=\"text\" class=\"form-control\" \r\n              [ngClass]=\"{'is-invalid': form.controls.systemId.invalid && form.controls.systemId.touched}\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Description: </label>\r\n            <!-- <textarea formControlName=\"description\" type=\"text\" class=\"form-control\" ></textarea> -->\r\n            <app-language-field [title]=\"'Description'\" [form]=\"form\" *ngIf=\"showModal\"></app-language-field> \r\n        </div>\r\n    </form>\r\n</app-modal>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\n@Component({\n  selector: 'app-test',\n  templateUrl: './test.component.html',\n  styleUrls: ['./test.component.scss']\n})\nexport class TestComponent implements OnInit {\n\n  form: FormGroup;\n\n  constructor(\n    private fb: FormBuilder\n  ) { }\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      name: 'test'\n    });\n  }\n\n}\n","<p>test works!</p>\n\n<form [formGroup]=\"form\">\n    <input type=\"text\" formControlName=\"name\">\n</form>"],"sourceRoot":"webpack:///"}